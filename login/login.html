<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./login.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
    <div class="main">
        <h2>로그인 하기</h2>
        <h3>도담도담을 통하여 로그인 하기</h3><br>
        <img src="../img/Arrow 1.svg" alt=""><br>
        <a
            href="http://dauth.b1nd.com/login?client_id=f502c9bed12443da89d6ffe69a9cd78de2b4a3b4556c45ce9688bdf5baf0d47c&redirect_uri=http://localhost:5500/login/login.html "><b>Login</b></a>
        <script src="./login.js"></script>
    </div>
    <script>
        let getQueryStringParams = query => {
            return query
                ? (/^[?#]/.test(query) ? query.slice(1) : query)
                    .split('&')
                    .reduce((params, param) => {
                        let [key, value] = param.split('=');
                        params[key] = value ? decodeURIComponent(value.replace(/\+/g, ' ')) : '';
                        return params;
                    }, {}
                    )
                : {}
        };

        let parsed = getQueryStringParams(window.location.search);
        if(parsed["code"] != null) {
            //alert(getQueryStringParams(window.location.search)["code"])
            axios.get(`http://192.168.0.21:5877/users/signin?code=${parsed["code"]}`)
                .then(e => console.log(e)).catch(e => console.log(e))
        }
    </script>
</body>

</html>